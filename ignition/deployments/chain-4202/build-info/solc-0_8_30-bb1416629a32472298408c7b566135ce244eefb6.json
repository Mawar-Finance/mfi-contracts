{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_30-bb1416629a32472298408c7b566135ce244eefb6",
  "solcVersion": "0.8.30",
  "solcLongVersion": "0.8.30+commit.73712a01",
  "userSourceNameMap": {
    "contracts/exchange/Exchange.sol": "project/contracts/exchange/Exchange.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "prague",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/exchange/Exchange.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.24;\r\n\r\nimport \"../interfaces/IMFI.sol\";\r\nimport \"../libs/Errors.sol\";\r\n\r\n/// @title Exchange - Beli MFI pakai ETH (kurs tetap, immutable)\r\n/// @dev Kontrak ini TIDAK mencetak MFI. Ia hanya menjual dari stok MFI yang dimilikinya.\r\n///      Pastikan kamu transfer MFI ke alamat kontrak ini sebagai \"liquidity\".\r\ncontract Exchange {\r\n    IMFI public immutable mfi;\r\n\r\n    /// @notice MFI per 1 ETH (18 desimal). Contoh: 3000e18 = 3000 MFI/ETH.\r\n    uint256 public immutable rate;\r\n\r\n    event Purchased(address indexed buyer, uint256 ethIn, uint256 mfiOut);\r\n\r\n    /// @param _mfi alamat token MFI\r\n    /// @param _rate MFI per 1 ETH (18 desimal); contoh 3000e18\r\n    constructor(IMFI _mfi, uint256 _rate) {\r\n        if (address(_mfi) == address(0)) revert Errors.ZeroAddress();\r\n        if (_rate == 0) revert Errors.InvalidAmount();\r\n        mfi = _mfi;\r\n        rate = _rate;\r\n    }\r\n\r\n    /// @notice Beli MFI pakai ETH dengan kurs tetap; MFI dikirim dari stok kontrak ini.\r\n    function buyMFI(address to) public payable {\r\n        if (to == address(0)) revert Errors.ZeroAddress();\r\n        if (msg.value == 0) revert Errors.InvalidAmount();\r\n\r\n        uint256 mfiOut = (msg.value * rate) / 1e18;\r\n\r\n        // Pastikan stok cukup\r\n        uint256 bal = mfi.balanceOf(address(this));\r\n        require(bal >= mfiOut, \"Exchange: insufficient MFI liquidity\");\r\n\r\n        bool ok = mfi.transfer(to, mfiOut);\r\n        require(ok, \"Exchange: MFI transfer failed\");\r\n\r\n        emit Purchased(to, msg.value, mfiOut);\r\n    }\r\n\r\n    /// @notice Kirim ETH langsung â†’ auto beli untuk pengirim\r\n    receive() external payable {\r\n        buyMFI(msg.sender);\r\n    }\r\n}\r\n"
      },
      "project/contracts/interfaces/IMFI.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.24;\r\n\r\n/// @notice Minimal interface ERC20 yang kita butuh (tanpa mint)\r\ninterface IMFI {\r\n    function decimals() external view returns (uint8);\r\n    function balanceOf(address) external view returns (uint256);\r\n    function transfer(address to, uint256 amount) external returns (bool);\r\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\r\n}\r\n"
      },
      "project/contracts/libs/Errors.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.24;\r\n\r\n/// @notice Custom errors (hemat gas)\r\nlibrary Errors {\r\n    error ZeroAddress();\r\n    error InvalidAmount();\r\n    error NotMultipleOfRoseUnit();\r\n    error ExceedsMaxRoses();\r\n    error NotTokenOwner();\r\n    error Unauthorized();\r\n}\r\n"
      }
    }
  }
}